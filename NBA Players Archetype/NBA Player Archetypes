{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/zerol0l/nba-player-archetypes?scriptVersionId=298107469\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown"},{"cell_type":"markdown","id":"77113947","metadata":{"papermill":{"duration":0.006881,"end_time":"2026-02-16T22:27:51.173951","exception":false,"start_time":"2026-02-16T22:27:51.16707","status":"completed"},"tags":[]},"source":["<div style=\"background: linear-gradient(135deg, #1D428A 0%, #C8102E 50%, #1D428A 100%); padding: 40px 30px; border-radius: 15px; margin-bottom: 20px;\">\n","    <h1 style=\"color: #FFFFFF; margin: 0; font-size: 42px; text-align: center;\">üèÄ NBA Player Archetypes</h1>\n","    <h3 style=\"color: #C0C0C0; text-align: center; font-weight: 300; margin-top: 10px;\">How the NBA's Player Roles Have Evolved (1996‚Äì2022)</h3>\n","    <p style=\"color: #A0A0A0; text-align: center; font-size: 14px; margin-top: 15px;\">K-Means Clustering ‚Ä¢ PCA Visualization ‚Ä¢ Positional Entropy ‚Ä¢ Unicorn Index ‚Ä¢ Efficiency Trends</p>\n","</div>\n","\n","---\n","\n","## üìä Executive Summary\n","\n","<div style=\"background-color: #f0f4f8; padding: 20px; border-radius: 10px; border-left: 5px solid #1D428A;\">\n","\n","| Key Finding | The Numbers | Method |\n","|-------------|-------------|--------|\n","| **6 natural player archetypes emerge from stats alone** | K-Means finds 6 distinct roles with zero position labels | Clustering on 9 advanced stats |\n","| **The NBA is getting MORE specialized, not positionless** | Positional entropy DOWN 6.6% since 1996 | Shannon entropy per season |\n","| **The efficiency revolution is real** | True Shooting up +5.3 percentage points | TS% trend analysis |\n","| **Unicorn players are multiplying** | Outlier rate nearly doubled: 4.7% ‚Üí 8.1% | Distance-to-centroid detection |\n","| **Stars and role players are diverging** | Top archetypes score 18+ PPG; bottom average 4 PPG | Cluster center profiles |\n","\n","</div>\n","\n","---\n","\n","## üéØ Project Objectives\n","\n","1. **Unsupervised Archetype Discovery**: Find natural player types from pure stats, no position labels\n","2. **Temporal Evolution**: Track how archetype distribution has shifted across 27 NBA seasons\n","3. **Test the \"Positionless\" Claim**: Measure it quantitatively with Shannon entropy\n","4. **Efficiency Revolution**: Quantify how True Shooting has changed by player type\n","5. **Unicorn Detection**: Identify players who defy every archetype\n","\n","---\n","\n","## üìë Table of Contents\n","\n","1. [Setup & Data Loading](#1)\n","2. [Data Quality Assessment](#2)\n","3. [Data Cleaning & Feature Selection](#3)\n","4. [Finding Optimal Archetypes (k)](#4)\n","5. [Clustering & PCA Visualization](#5)\n","6. [Naming the Archetypes](#6)\n","7. [Archetype Evolution Timeline](#7)\n","8. [Positional Entropy Score](#8)\n","9. [Efficiency Revolution](#9)\n","10. [Unicorn Index](#10)\n","11. [Conclusions](#11)"]},{"cell_type":"markdown","id":"199a6fd1","metadata":{"papermill":{"duration":0.005793,"end_time":"2026-02-16T22:27:51.185945","exception":false,"start_time":"2026-02-16T22:27:51.180152","status":"completed"},"tags":[]},"source":["<a id=\"1\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üì¶ 1. Setup & Data Loading</h2>\n","</div>"]},{"cell_type":"code","execution_count":1,"id":"893f073b","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:51.199125Z","iopub.status.busy":"2026-02-16T22:27:51.198744Z","iopub.status.idle":"2026-02-16T22:27:59.444602Z","shell.execute_reply":"2026-02-16T22:27:59.443489Z"},"papermill":{"duration":8.254992,"end_time":"2026-02-16T22:27:59.446582","exception":false,"start_time":"2026-02-16T22:27:51.19159","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["‚úÖ All libraries loaded\n"]}],"source":["import pandas as pd\n","import numpy as np\n","import plotly.express as px\n","import plotly.graph_objects as go\n","from plotly.subplots import make_subplots\n","import plotly.io as pio\n","from sklearn.preprocessing import StandardScaler\n","from sklearn.cluster import KMeans\n","from sklearn.decomposition import PCA\n","from sklearn.metrics import silhouette_score\n","from scipy.stats import entropy\n","import os, warnings\n","warnings.filterwarnings('ignore')\n","\n","pio.renderers.default = 'iframe'\n","pio.templates.default = 'plotly_white'\n","\n","NBA_ORANGE = '#F58426'\n","NBA_BLUE   = '#1D428A'\n","NBA_RED    = '#C8102E'\n","NBA_GOLD   = '#FFD700'\n","\n","print('‚úÖ All libraries loaded')"]},{"cell_type":"code","execution_count":2,"id":"e32cf462","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:59.459815Z","iopub.status.busy":"2026-02-16T22:27:59.459476Z","iopub.status.idle":"2026-02-16T22:27:59.467768Z","shell.execute_reply":"2026-02-16T22:27:59.466817Z"},"papermill":{"duration":0.017251,"end_time":"2026-02-16T22:27:59.469737","exception":false,"start_time":"2026-02-16T22:27:59.452486","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["üìÅ Using: /kaggle/input/datasets/justinas/nba-players-data\n","\n","  üìÑ all_seasons.csv                                (1.92 MB)\n"]}],"source":["# ‚îÄ‚îÄ Discover files (supports multiple NBA datasets) ‚îÄ‚îÄ\n","POSSIBLE = ['/kaggle/input/datasets/justinas/nba-players-data','/kaggle/input/datasets/sumitrodatta/nba-aba-baa-stats',\n","            '/kaggle/input/datasets/drgilermo/nba-players-stats']\n","INPUT_DIR = None\n","for d in POSSIBLE:\n","    if os.path.isdir(d): INPUT_DIR = d; break\n","if not INPUT_DIR:\n","    INPUT_DIR = '/kaggle/input'\n","    for sub in os.listdir(INPUT_DIR):\n","        full = os.path.join(INPUT_DIR, sub)\n","        if os.path.isdir(full):\n","            INPUT_DIR = full; break\n","\n","print(f'üìÅ Using: {INPUT_DIR}\\n')\n","for f in sorted(os.listdir(INPUT_DIR)):\n","    fp = os.path.join(INPUT_DIR, f)\n","    if os.path.isfile(fp):\n","        print(f'  üìÑ {f:45s}  ({os.path.getsize(fp)/1e6:.2f} MB)')"]},{"cell_type":"code","execution_count":3,"id":"1f58abbc","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:59.483408Z","iopub.status.busy":"2026-02-16T22:27:59.482551Z","iopub.status.idle":"2026-02-16T22:27:59.597904Z","shell.execute_reply":"2026-02-16T22:27:59.596911Z"},"papermill":{"duration":0.124266,"end_time":"2026-02-16T22:27:59.599923","exception":false,"start_time":"2026-02-16T22:27:59.475657","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["\n","‚úÖ Loaded: all_seasons.csv\n","   Shape: 12,844 rows √ó 22 cols\n"]},{"data":{"text/html":["<div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>unnamed:_0</th>\n","      <th>player_name</th>\n","      <th>team_abbreviation</th>\n","      <th>age</th>\n","      <th>player_height</th>\n","      <th>player_weight</th>\n","      <th>college</th>\n","      <th>country</th>\n","      <th>draft_year</th>\n","      <th>draft_round</th>\n","      <th>...</th>\n","      <th>pts</th>\n","      <th>reb</th>\n","      <th>ast</th>\n","      <th>net_rating</th>\n","      <th>oreb_pct</th>\n","      <th>dreb_pct</th>\n","      <th>usg_pct</th>\n","      <th>ts_pct</th>\n","      <th>ast_pct</th>\n","      <th>season</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>0</td>\n","      <td>Randy Livingston</td>\n","      <td>HOU</td>\n","      <td>22.0</td>\n","      <td>193.04</td>\n","      <td>94.800728</td>\n","      <td>Louisiana State</td>\n","      <td>USA</td>\n","      <td>1996</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>3.9</td>\n","      <td>1.5</td>\n","      <td>2.4</td>\n","      <td>0.3</td>\n","      <td>0.042</td>\n","      <td>0.071</td>\n","      <td>0.169</td>\n","      <td>0.487</td>\n","      <td>0.248</td>\n","      <td>1996-97</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>1</td>\n","      <td>Gaylon Nickerson</td>\n","      <td>WAS</td>\n","      <td>28.0</td>\n","      <td>190.50</td>\n","      <td>86.182480</td>\n","      <td>Northwestern Oklahoma</td>\n","      <td>USA</td>\n","      <td>1994</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>3.8</td>\n","      <td>1.3</td>\n","      <td>0.3</td>\n","      <td>8.9</td>\n","      <td>0.030</td>\n","      <td>0.111</td>\n","      <td>0.174</td>\n","      <td>0.497</td>\n","      <td>0.043</td>\n","      <td>1996-97</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>2</td>\n","      <td>George Lynch</td>\n","      <td>VAN</td>\n","      <td>26.0</td>\n","      <td>203.20</td>\n","      <td>103.418976</td>\n","      <td>North Carolina</td>\n","      <td>USA</td>\n","      <td>1993</td>\n","      <td>1</td>\n","      <td>...</td>\n","      <td>8.3</td>\n","      <td>6.4</td>\n","      <td>1.9</td>\n","      <td>-8.2</td>\n","      <td>0.106</td>\n","      <td>0.185</td>\n","      <td>0.175</td>\n","      <td>0.512</td>\n","      <td>0.125</td>\n","      <td>1996-97</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>3 rows √ó 22 columns</p>\n","</div>"],"text/plain":["   unnamed:_0       player_name team_abbreviation   age  player_height  \\\n","0           0  Randy Livingston               HOU  22.0         193.04   \n","1           1  Gaylon Nickerson               WAS  28.0         190.50   \n","2           2      George Lynch               VAN  26.0         203.20   \n","\n","   player_weight                college country draft_year draft_round  ...  \\\n","0      94.800728        Louisiana State     USA       1996           2  ...   \n","1      86.182480  Northwestern Oklahoma     USA       1994           2  ...   \n","2     103.418976         North Carolina     USA       1993           1  ...   \n","\n","   pts  reb  ast  net_rating  oreb_pct  dreb_pct  usg_pct  ts_pct  ast_pct  \\\n","0  3.9  1.5  2.4         0.3     0.042     0.071    0.169   0.487    0.248   \n","1  3.8  1.3  0.3         8.9     0.030     0.111    0.174   0.497    0.043   \n","2  8.3  6.4  1.9        -8.2     0.106     0.185    0.175   0.512    0.125   \n","\n","    season  \n","0  1996-97  \n","1  1996-97  \n","2  1996-97  \n","\n","[3 rows x 22 columns]"]},"execution_count":3,"metadata":{},"output_type":"execute_result"}],"source":["# ‚îÄ‚îÄ Load the best CSV ‚îÄ‚îÄ\n","csv_files = sorted([f for f in os.listdir(INPUT_DIR) if f.endswith('.csv')])\n","best = None\n","for f in csv_files:\n","    if any(kw in f.lower() for kw in ['all_season','per_game','player_per','players']):\n","        best = f; break\n","if not best: best = csv_files[0]\n","\n","df_raw = pd.read_csv(os.path.join(INPUT_DIR, best))\n","df_raw.columns = df_raw.columns.str.strip().str.lower().str.replace(' ','_').str.replace('/','_')\n","print(f'\\n‚úÖ Loaded: {best}')\n","print(f'   Shape: {df_raw.shape[0]:,} rows √ó {df_raw.shape[1]} cols')\n","df_raw.head(3)"]},{"cell_type":"markdown","id":"b08286b3","metadata":{"papermill":{"duration":0.00588,"end_time":"2026-02-16T22:27:59.611964","exception":false,"start_time":"2026-02-16T22:27:59.606084","status":"completed"},"tags":[]},"source":["<a id=\"2\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üîç 2. Data Quality Assessment</h2>\n","</div>"]},{"cell_type":"code","execution_count":4,"id":"0dfbe85e","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:59.626149Z","iopub.status.busy":"2026-02-16T22:27:59.625781Z","iopub.status.idle":"2026-02-16T22:27:59.66893Z","shell.execute_reply":"2026-02-16T22:27:59.668022Z"},"papermill":{"duration":0.052068,"end_time":"2026-02-16T22:27:59.670768","exception":false,"start_time":"2026-02-16T22:27:59.6187","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>dtype</th>\n","      <th>non_null</th>\n","      <th>null_%</th>\n","      <th>unique</th>\n","      <th>example</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>unnamed:_0</th>\n","      <td>int64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>12844</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>player_name</th>\n","      <td>object</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>2551</td>\n","      <td>Randy Livingston</td>\n","    </tr>\n","    <tr>\n","      <th>team_abbreviation</th>\n","      <td>object</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>36</td>\n","      <td>HOU</td>\n","    </tr>\n","    <tr>\n","      <th>age</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>27</td>\n","      <td>22.0</td>\n","    </tr>\n","    <tr>\n","      <th>player_height</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>30</td>\n","      <td>193.04</td>\n","    </tr>\n","    <tr>\n","      <th>player_weight</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>157</td>\n","      <td>94.800728</td>\n","    </tr>\n","    <tr>\n","      <th>college</th>\n","      <td>object</td>\n","      <td>10990</td>\n","      <td>14.4</td>\n","      <td>356</td>\n","      <td>Louisiana State</td>\n","    </tr>\n","    <tr>\n","      <th>country</th>\n","      <td>object</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>82</td>\n","      <td>USA</td>\n","    </tr>\n","    <tr>\n","      <th>draft_year</th>\n","      <td>object</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>48</td>\n","      <td>1996</td>\n","    </tr>\n","    <tr>\n","      <th>draft_round</th>\n","      <td>object</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>9</td>\n","      <td>2</td>\n","    </tr>\n","    <tr>\n","      <th>draft_number</th>\n","      <td>object</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>76</td>\n","      <td>42</td>\n","    </tr>\n","    <tr>\n","      <th>gp</th>\n","      <td>int64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>85</td>\n","      <td>64</td>\n","    </tr>\n","    <tr>\n","      <th>pts</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>319</td>\n","      <td>3.9</td>\n","    </tr>\n","    <tr>\n","      <th>reb</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>153</td>\n","      <td>1.5</td>\n","    </tr>\n","    <tr>\n","      <th>ast</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>115</td>\n","      <td>2.4</td>\n","    </tr>\n","    <tr>\n","      <th>net_rating</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>772</td>\n","      <td>0.3</td>\n","    </tr>\n","    <tr>\n","      <th>oreb_pct</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>216</td>\n","      <td>0.042</td>\n","    </tr>\n","    <tr>\n","      <th>dreb_pct</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>352</td>\n","      <td>0.071</td>\n","    </tr>\n","    <tr>\n","      <th>usg_pct</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>348</td>\n","      <td>0.169</td>\n","    </tr>\n","    <tr>\n","      <th>ts_pct</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>563</td>\n","      <td>0.487</td>\n","    </tr>\n","    <tr>\n","      <th>ast_pct</th>\n","      <td>float64</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>483</td>\n","      <td>0.248</td>\n","    </tr>\n","    <tr>\n","      <th>season</th>\n","      <td>object</td>\n","      <td>12844</td>\n","      <td>0.0</td>\n","      <td>27</td>\n","      <td>1996-97</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>"],"text/plain":["                     dtype  non_null  null_%  unique           example\n","unnamed:_0           int64     12844     0.0   12844                 0\n","player_name         object     12844     0.0    2551  Randy Livingston\n","team_abbreviation   object     12844     0.0      36               HOU\n","age                float64     12844     0.0      27              22.0\n","player_height      float64     12844     0.0      30            193.04\n","player_weight      float64     12844     0.0     157         94.800728\n","college             object     10990    14.4     356   Louisiana State\n","country             object     12844     0.0      82               USA\n","draft_year          object     12844     0.0      48              1996\n","draft_round         object     12844     0.0       9                 2\n","draft_number        object     12844     0.0      76                42\n","gp                   int64     12844     0.0      85                64\n","pts                float64     12844     0.0     319               3.9\n","reb                float64     12844     0.0     153               1.5\n","ast                float64     12844     0.0     115               2.4\n","net_rating         float64     12844     0.0     772               0.3\n","oreb_pct           float64     12844     0.0     216             0.042\n","dreb_pct           float64     12844     0.0     352             0.071\n","usg_pct            float64     12844     0.0     348             0.169\n","ts_pct             float64     12844     0.0     563             0.487\n","ast_pct            float64     12844     0.0     483             0.248\n","season              object     12844     0.0      27           1996-97"]},"execution_count":4,"metadata":{},"output_type":"execute_result"}],"source":["audit = pd.DataFrame({'dtype':df_raw.dtypes,'non_null':df_raw.notnull().sum(),\n","    'null_%':(df_raw.isnull().sum()/len(df_raw)*100).round(1),'unique':df_raw.nunique(),\n","    'example':df_raw.iloc[0]})\n","audit"]},{"cell_type":"markdown","id":"48ac2747","metadata":{"papermill":{"duration":0.006152,"end_time":"2026-02-16T22:27:59.68359","exception":false,"start_time":"2026-02-16T22:27:59.677438","status":"completed"},"tags":[]},"source":["<a id=\"3\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">‚öôÔ∏è 3. Data Cleaning & Feature Selection</h2>\n","</div>"]},{"cell_type":"code","execution_count":5,"id":"dede384a","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:59.698732Z","iopub.status.busy":"2026-02-16T22:27:59.697548Z","iopub.status.idle":"2026-02-16T22:27:59.708063Z","shell.execute_reply":"2026-02-16T22:27:59.707075Z"},"papermill":{"duration":0.019969,"end_time":"2026-02-16T22:27:59.709881","exception":false,"start_time":"2026-02-16T22:27:59.689912","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<div style=\"background:#f8f9fa;padding:15px;border-radius:10px;\"><table style=\"width:100%;font-size:14px;\"><tr style=\"background:#1D428A;color:white;\"><th style=\"padding:8px;\">‚úì</th><th style=\"padding:8px;\">Feature</th><th style=\"padding:8px;\">Column</th></tr><tr><td>‚úÖ</td><td><b>player</b></td><td><code>player_name</code></td></tr><tr><td>‚úÖ</td><td><b>season</b></td><td><code>season</code></td></tr><tr><td>‚úÖ</td><td><b>gp</b></td><td><code>gp</code></td></tr><tr><td>‚úÖ</td><td><b>pts</b></td><td><code>pts</code></td></tr><tr><td>‚úÖ</td><td><b>reb</b></td><td><code>reb</code></td></tr><tr><td>‚úÖ</td><td><b>ast</b></td><td><code>ast</code></td></tr><tr><td>‚úÖ</td><td><b>oreb</b></td><td><code>oreb_pct</code></td></tr><tr><td>‚úÖ</td><td><b>dreb</b></td><td><code>dreb_pct</code></td></tr><tr><td>‚úÖ</td><td><b>usg</b></td><td><code>usg_pct</code></td></tr><tr><td>‚úÖ</td><td><b>ts</b></td><td><code>ts_pct</code></td></tr><tr><td>‚úÖ</td><td><b>ast_pct</b></td><td><code>ast_pct</code></td></tr><tr><td>‚úÖ</td><td><b>net_rtg</b></td><td><code>net_rating</code></td></tr><tr><td>‚úÖ</td><td><b>age</b></td><td><code>age</code></td></tr><tr><td>‚úÖ</td><td><b>height</b></td><td><code>player_height</code></td></tr><tr><td>‚úÖ</td><td><b>weight</b></td><td><code>player_weight</code></td></tr></table></div>"],"text/plain":["<IPython.core.display.HTML object>"]},"execution_count":5,"metadata":{},"output_type":"execute_result"}],"source":["# ‚îÄ‚îÄ Direct column mapping (based on actual dataset) ‚îÄ‚îÄ\n","# This dataset has: player_name, team_abbreviation, age, player_height, player_weight,\n","# college, country, draft_year, draft_round, draft_number, gp, pts, reb, ast,\n","# net_rating, oreb_pct, dreb_pct, usg_pct, ts_pct, ast_pct, season\n","\n","COLS = {}\n","col_map = {\n","    'player': ['player_name'],\n","    'season': ['season'],\n","    'gp':     ['gp'],\n","    'pts':    ['pts'],\n","    'reb':    ['reb'],\n","    'ast':    ['ast'],\n","    'oreb':   ['oreb_pct'],\n","    'dreb':   ['dreb_pct'],\n","    'usg':    ['usg_pct'],\n","    'ts':     ['ts_pct'],\n","    'ast_pct':['ast_pct'],\n","    'net_rtg': ['net_rating'],\n","    'age':    ['age'],\n","    'height': ['player_height'],\n","    'weight': ['player_weight'],\n","}\n","\n","for key, candidates in col_map.items():\n","    for c in candidates:\n","        if c in df_raw.columns:\n","            COLS[key] = c\n","            break\n","    else:\n","        COLS[key] = None\n","\n","from IPython.display import HTML\n","rows = ''.join(f'<tr><td>{\"‚úÖ\" if v else \"‚ùå\"}</td><td><b>{k}</b></td><td><code>{v or \"NOT FOUND\"}</code></td></tr>' for k,v in COLS.items())\n","HTML(f'<div style=\"background:#f8f9fa;padding:15px;border-radius:10px;\"><table style=\"width:100%;font-size:14px;\"><tr style=\"background:#1D428A;color:white;\"><th style=\"padding:8px;\">‚úì</th><th style=\"padding:8px;\">Feature</th><th style=\"padding:8px;\">Column</th></tr>{rows}</table></div>')"]},{"cell_type":"code","execution_count":6,"id":"9e32431d","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:59.724642Z","iopub.status.busy":"2026-02-16T22:27:59.723815Z","iopub.status.idle":"2026-02-16T22:27:59.756802Z","shell.execute_reply":"2026-02-16T22:27:59.755652Z"},"papermill":{"duration":0.042659,"end_time":"2026-02-16T22:27:59.758898","exception":false,"start_time":"2026-02-16T22:27:59.716239","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Seasons: 1996‚Äì2022\n","Filtered: 12,844 ‚Üí 10,720 player-seasons  (min 20 GP)\n"]}],"source":["df = df_raw.copy()\n","\n","# Parse season: \"1996-97\" ‚Üí 1996\n","if COLS['season']:\n","    df['season_year'] = pd.to_numeric(df[COLS['season']].astype(str).str[:4], errors='coerce')\n","    df = df[df['season_year'].between(1950, 2030)].copy()\n","\n","# Filter: min 20 GP\n","if COLS['gp']:\n","    df[COLS['gp']] = pd.to_numeric(df[COLS['gp']], errors='coerce')\n","    df = df[df[COLS['gp']] >= 20]\n","\n","# Ensure numeric\n","for key in ['pts','reb','ast','oreb','dreb','usg','ts','ast_pct','net_rtg']:\n","    if COLS.get(key) and COLS[key] in df.columns:\n","        df[COLS[key]] = pd.to_numeric(df[COLS[key]], errors='coerce')\n","\n","print(f\"Seasons: {df['season_year'].min():.0f}‚Äì{df['season_year'].max():.0f}\")\n","print(f\"Filtered: {len(df_raw):,} ‚Üí {len(df):,} player-seasons  (min 20 GP)\")"]},{"cell_type":"code","execution_count":7,"id":"5a2a3cd0","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:59.77397Z","iopub.status.busy":"2026-02-16T22:27:59.773247Z","iopub.status.idle":"2026-02-16T22:27:59.78548Z","shell.execute_reply":"2026-02-16T22:27:59.784379Z"},"papermill":{"duration":0.021896,"end_time":"2026-02-16T22:27:59.787346","exception":false,"start_time":"2026-02-16T22:27:59.76545","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Clustering on 9 features:\n","  üìä pts                        mean=9.22  nulls=0\n","  üìä reb                        mean=3.93  nulls=0\n","  üìä ast                        mean=2.04  nulls=0\n","  üìä oreb_pct                   mean=0.05  nulls=0\n","  üìä dreb_pct                   mean=0.14  nulls=0\n","  üìä usg_pct                    mean=0.19  nulls=0\n","  üìä ts_pct                     mean=0.53  nulls=0\n","  üìä ast_pct                    mean=0.14  nulls=0\n","  üìä net_rating                 mean=-1.09  nulls=0\n"]}],"source":["# ‚îÄ‚îÄ Select clustering features (all available advanced stats) ‚îÄ‚îÄ\n","cluster_keys = ['pts', 'reb', 'ast', 'oreb', 'dreb', 'usg', 'ts', 'ast_pct', 'net_rtg']\n","cluster_features = [COLS[k] for k in cluster_keys if COLS.get(k) and COLS[k] in df.columns]\n","\n","for c in cluster_features:\n","    df[c] = pd.to_numeric(df[c], errors='coerce')\n","\n","print(f'Clustering on {len(cluster_features)} features:')\n","for c in cluster_features:\n","    print(f'  üìä {c:25s}  mean={df[c].mean():.2f}  nulls={df[c].isnull().sum()}')"]},{"cell_type":"markdown","id":"d28bf9fd","metadata":{"papermill":{"duration":0.006396,"end_time":"2026-02-16T22:27:59.800483","exception":false,"start_time":"2026-02-16T22:27:59.794087","status":"completed"},"tags":[]},"source":["<div style=\"display: flex; gap: 15px; flex-wrap: wrap; margin: 20px 0;\">\n","    <div style=\"flex:1; min-width:180px; background: linear-gradient(135deg, #1D428A, #0a4a8a); padding: 20px; border-radius: 12px; text-align: center; color: white;\">\n","        <div style=\"font-size: 14px; opacity: 0.8;\">üìÖ Seasons Covered</div>\n","        <div style=\"font-size: 32px; font-weight: 700; color: #F58426;\">27</div>\n","        <div style=\"font-size: 11px; opacity: 0.6;\">1996‚Äì2022</div>\n","    </div>\n","    <div style=\"flex:1; min-width:180px; background: linear-gradient(135deg, #C8102E, #8B0000); padding: 20px; border-radius: 12px; text-align: center; color: white;\">\n","        <div style=\"font-size: 14px; opacity: 0.8;\">üèÄ Player-Seasons</div>\n","        <div style=\"font-size: 32px; font-weight: 700; color: #FFD700;\">10,720</div>\n","        <div style=\"font-size: 11px; opacity: 0.6;\">After GP ‚â• 20 filter</div>\n","    </div>\n","    <div style=\"flex:1; min-width:180px; background: linear-gradient(135deg, #1D428A, #0a4a8a); padding: 20px; border-radius: 12px; text-align: center; color: white;\">\n","        <div style=\"font-size: 14px; opacity: 0.8;\">üî¨ Clustering Features</div>\n","        <div style=\"font-size: 32px; font-weight: 700; color: #F58426;\">9</div>\n","        <div style=\"font-size: 11px; opacity: 0.6;\">PTS REB AST OREB% DREB% USG% TS% AST% NET</div>\n","    </div>\n","    <div style=\"flex:1; min-width:180px; background: linear-gradient(135deg, #C8102E, #8B0000); padding: 20px; border-radius: 12px; text-align: center; color: white;\">\n","        <div style=\"font-size: 14px; opacity: 0.8;\">üéØ Archetypes Found</div>\n","        <div style=\"font-size: 32px; font-weight: 700; color: #FFD700;\">6</div>\n","        <div style=\"font-size: 11px; opacity: 0.6;\">Silhouette-validated</div>\n","    </div>\n","</div>"]},{"cell_type":"markdown","id":"53a4eb14","metadata":{"papermill":{"duration":0.006466,"end_time":"2026-02-16T22:27:59.813332","exception":false,"start_time":"2026-02-16T22:27:59.806866","status":"completed"},"tags":[]},"source":["<a id=\"4\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üéØ 4. Finding Optimal Archetypes (k)</h2>\n","</div>\n","\n","We use both the **Elbow Method** and **Silhouette Score** to determine the optimal number of player clusters."]},{"cell_type":"code","execution_count":8,"id":"b3f709c3","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:27:59.827936Z","iopub.status.busy":"2026-02-16T22:27:59.82757Z","iopub.status.idle":"2026-02-16T22:28:17.120727Z","shell.execute_reply":"2026-02-16T22:28:17.119279Z"},"papermill":{"duration":17.303058,"end_time":"2026-02-16T22:28:17.122882","exception":false,"start_time":"2026-02-16T22:27:59.819824","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Feature matrix: 10,720 players √ó 9 stats\n","  k=3:  silhouette=0.2215  inertia=59,309\n","  k=4:  silhouette=0.2012  inertia=52,397\n","  k=5:  silhouette=0.1835  inertia=47,488\n","  k=6:  silhouette=0.1789  inertia=43,882\n","  k=7:  silhouette=0.1742  inertia=41,120\n","  k=8:  silhouette=0.1643  inertia=39,126\n","  k=9:  silhouette=0.1610  inertia=37,578\n","  k=10:  silhouette=0.1582  inertia=36,185\n"]}],"source":["scaler = StandardScaler()\n","X = scaler.fit_transform(df[cluster_features].fillna(0))\n","print(f'Feature matrix: {X.shape[0]:,} players √ó {X.shape[1]} stats')\n","\n","sil, inertias = {}, {}\n","for k in range(3, 11):\n","    km = KMeans(n_clusters=k, random_state=42, n_init=10)\n","    labels = km.fit_predict(X)\n","    sil[k] = silhouette_score(X, labels)\n","    inertias[k] = km.inertia_\n","    print(f'  k={k}:  silhouette={sil[k]:.4f}  inertia={inertias[k]:,.0f}')"]},{"cell_type":"code","execution_count":9,"id":"72a3e2bf","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:17.139254Z","iopub.status.busy":"2026-02-16T22:28:17.13837Z","iopub.status.idle":"2026-02-16T22:28:17.489318Z","shell.execute_reply":"2026-02-16T22:28:17.488243Z"},"papermill":{"duration":0.36147,"end_time":"2026-02-16T22:28:17.491571","exception":false,"start_time":"2026-02-16T22:28:17.130101","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe\n","    scrolling=\"no\"\n","    width=\"100%\"\n","    height=\"420\"\n","    src=\"iframe_figures/figure_9.html\"\n","    frameborder=\"0\"\n","    allowfullscreen\n","></iframe>\n"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["\n","Best by silhouette: k=3  |  Using k=6 for basketball interpretability\n"]}],"source":["fig = make_subplots(rows=1, cols=2, subplot_titles=('<b>Elbow Method</b>', '<b>Silhouette Score</b>'))\n","\n","fig.add_trace(go.Scatter(x=list(inertias.keys()), y=list(inertias.values()),\n","    mode='lines+markers', marker=dict(size=10, color=NBA_BLUE),\n","    line=dict(width=2.5, color=NBA_BLUE)), row=1, col=1)\n","\n","fig.add_trace(go.Scatter(x=list(sil.keys()), y=list(sil.values()),\n","    mode='lines+markers', marker=dict(size=10, color=NBA_ORANGE),\n","    line=dict(width=2.5, color=NBA_ORANGE)), row=1, col=2)\n","\n","best_k = max(sil, key=sil.get)\n","fig.add_vline(x=best_k, line_dash='dash', line_color=NBA_RED, row=1, col=2,\n","              annotation_text=f'Best k={best_k}')\n","\n","fig.update_layout(height=400, font_family='Arial', plot_bgcolor='#fafafa', showlegend=False)\n","fig.update_xaxes(title_text='k', row=1, col=1); fig.update_yaxes(title_text='Inertia', row=1, col=1)\n","fig.update_xaxes(title_text='k', row=1, col=2); fig.update_yaxes(title_text='Silhouette', row=1, col=2)\n","fig.show()\n","\n","N_CLUSTERS = 6\n","print(f'\\nBest by silhouette: k={best_k}  |  Using k={N_CLUSTERS} for basketball interpretability')"]},{"cell_type":"markdown","id":"2f5b16ba","metadata":{"papermill":{"duration":0.007314,"end_time":"2026-02-16T22:28:17.506192","exception":false,"start_time":"2026-02-16T22:28:17.498878","status":"completed"},"tags":[]},"source":["<a id=\"5\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üß¨ 5. Clustering & PCA Visualization</h2>\n","</div>"]},{"cell_type":"code","execution_count":10,"id":"16b41edc","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:17.52219Z","iopub.status.busy":"2026-02-16T22:28:17.521799Z","iopub.status.idle":"2026-02-16T22:28:18.484317Z","shell.execute_reply":"2026-02-16T22:28:18.483329Z"},"papermill":{"duration":0.973941,"end_time":"2026-02-16T22:28:18.48719","exception":false,"start_time":"2026-02-16T22:28:17.513249","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["PCA explained variance: 65.2%\n","  PC1: 35.4%  |  PC2: 29.8%\n","\n","Cluster sizes:\n","  Cluster 0: 1,811 players\n","  Cluster 1: 2,837 players\n","  Cluster 2: 1,167 players\n","  Cluster 3: 1,188 players\n","  Cluster 4: 2,127 players\n","  Cluster 5: 1,590 players\n"]}],"source":["km = KMeans(n_clusters=N_CLUSTERS, random_state=42, n_init=15)\n","df['archetype'] = km.fit_predict(X)\n","\n","pca = PCA(n_components=2, random_state=42)\n","coords = pca.fit_transform(X)\n","df['pca_x'], df['pca_y'] = coords[:,0], coords[:,1]\n","\n","print(f'PCA explained variance: {pca.explained_variance_ratio_.sum():.1%}')\n","print(f'  PC1: {pca.explained_variance_ratio_[0]:.1%}  |  PC2: {pca.explained_variance_ratio_[1]:.1%}')\n","print(f'\\nCluster sizes:')\n","for i, cnt in df['archetype'].value_counts().sort_index().items():\n","    print(f'  Cluster {i}: {cnt:,} players')"]},{"cell_type":"code","execution_count":11,"id":"03d4380a","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:18.512202Z","iopub.status.busy":"2026-02-16T22:28:18.511809Z","iopub.status.idle":"2026-02-16T22:28:18.537294Z","shell.execute_reply":"2026-02-16T22:28:18.536545Z"},"papermill":{"duration":0.040825,"end_time":"2026-02-16T22:28:18.53986","exception":false,"start_time":"2026-02-16T22:28:18.499035","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>pts</th>\n","      <th>reb</th>\n","      <th>ast</th>\n","      <th>oreb_pct</th>\n","      <th>dreb_pct</th>\n","      <th>usg_pct</th>\n","      <th>ts_pct</th>\n","      <th>ast_pct</th>\n","      <th>net_rating</th>\n","    </tr>\n","    <tr>\n","      <th>cluster</th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>4.0</td>\n","      <td>2.3</td>\n","      <td>0.7</td>\n","      <td>0.1</td>\n","      <td>0.1</td>\n","      <td>0.2</td>\n","      <td>0.5</td>\n","      <td>0.1</td>\n","      <td>-6.8</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>9.3</td>\n","      <td>3.2</td>\n","      <td>1.7</td>\n","      <td>0.0</td>\n","      <td>0.1</td>\n","      <td>0.2</td>\n","      <td>0.6</td>\n","      <td>0.1</td>\n","      <td>1.3</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>16.2</td>\n","      <td>8.7</td>\n","      <td>2.3</td>\n","      <td>0.1</td>\n","      <td>0.2</td>\n","      <td>0.2</td>\n","      <td>0.6</td>\n","      <td>0.1</td>\n","      <td>1.0</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>18.5</td>\n","      <td>4.5</td>\n","      <td>5.9</td>\n","      <td>0.0</td>\n","      <td>0.1</td>\n","      <td>0.3</td>\n","      <td>0.5</td>\n","      <td>0.3</td>\n","      <td>2.3</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>6.1</td>\n","      <td>4.9</td>\n","      <td>0.8</td>\n","      <td>0.1</td>\n","      <td>0.2</td>\n","      <td>0.2</td>\n","      <td>0.6</td>\n","      <td>0.1</td>\n","      <td>-0.5</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>7.1</td>\n","      <td>2.0</td>\n","      <td>2.9</td>\n","      <td>0.0</td>\n","      <td>0.1</td>\n","      <td>0.2</td>\n","      <td>0.5</td>\n","      <td>0.2</td>\n","      <td>-3.8</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>"],"text/plain":["          pts  reb  ast  oreb_pct  dreb_pct  usg_pct  ts_pct  ast_pct  \\\n","cluster                                                                 \n","0         4.0  2.3  0.7       0.1       0.1      0.2     0.5      0.1   \n","1         9.3  3.2  1.7       0.0       0.1      0.2     0.6      0.1   \n","2        16.2  8.7  2.3       0.1       0.2      0.2     0.6      0.1   \n","3        18.5  4.5  5.9       0.0       0.1      0.3     0.5      0.3   \n","4         6.1  4.9  0.8       0.1       0.2      0.2     0.6      0.1   \n","5         7.1  2.0  2.9       0.0       0.1      0.2     0.5      0.2   \n","\n","         net_rating  \n","cluster              \n","0              -6.8  \n","1               1.3  \n","2               1.0  \n","3               2.3  \n","4              -0.5  \n","5              -3.8  "]},"execution_count":11,"metadata":{},"output_type":"execute_result"}],"source":["# Cluster centers (original scale)\n","centers = pd.DataFrame(scaler.inverse_transform(km.cluster_centers_), columns=cluster_features)\n","centers.index.name = 'cluster'\n","centers.round(1)"]},{"cell_type":"markdown","id":"290b2c7d","metadata":{"papermill":{"duration":0.00762,"end_time":"2026-02-16T22:28:18.55492","exception":false,"start_time":"2026-02-16T22:28:18.5473","status":"completed"},"tags":[]},"source":["<a id=\"6\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üè∑Ô∏è 6. Naming the Archetypes</h2>\n","</div>\n","\n","<div style=\"background: linear-gradient(135deg, #1D428A, #0a4a8a); border-radius: 12px; padding: 20px; color: white; margin: 15px 0;\">\n","    <h4 style=\"color: #F58426; margin-bottom: 10px;\">üí° How Auto-Labeling Works</h4>\n","    <p style=\"font-size: 15px; line-height: 1.6;\">We rank each cluster by its standout stats ‚Äî the cluster with the highest AST becomes <b>Floor Generals</b>, highest BLK becomes <b>Paint Beasts</b>, etc. No human bias, just data.</p>\n","</div>"]},{"cell_type":"code","execution_count":12,"id":"229bafd4","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:18.571669Z","iopub.status.busy":"2026-02-16T22:28:18.571369Z","iopub.status.idle":"2026-02-16T22:28:18.593456Z","shell.execute_reply":"2026-02-16T22:28:18.59257Z"},"papermill":{"duration":0.033135,"end_time":"2026-02-16T22:28:18.59541","exception":false,"start_time":"2026-02-16T22:28:18.562275","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<div style=\"background:#f8f9fa;padding:15px;border-radius:10px;\">\n","<table style=\"width:100%;font-size:13px;border-collapse:collapse;\">\n","<tr style=\"background:#1D428A;color:white;\">\n","<th style=\"padding:8px;\">ID</th><th style=\"padding:8px;\">Archetype</th><th style=\"padding:8px;\">Count</th>\n","<th style=\"padding:8px;\">PPG</th><th style=\"padding:8px;\">RPG</th><th style=\"padding:8px;\">APG</th>\n","<th style=\"padding:8px;\">USG%</th><th style=\"padding:8px;\">TS%</th><th style=\"padding:8px;\">Net Rtg</th>\n","</tr><tr><td style=\"padding:8px;text-align:center;font-weight:bold;\">0</td><td style=\"padding:8px;font-weight:bold;\">Deep Bench</td><td style=\"padding:8px;text-align:right;\">1,811</td><td style=\"padding:8px;text-align:right;\">4.0</td><td style=\"padding:8px;text-align:right;\">2.3</td><td style=\"padding:8px;text-align:right;\">0.7</td><td style=\"padding:8px;text-align:right;\">0.163</td><td style=\"padding:8px;text-align:right;\">0.464</td><td style=\"padding:8px;text-align:right;\">-6.8</td></tr><tr><td style=\"padding:8px;text-align:center;font-weight:bold;\">1</td><td style=\"padding:8px;font-weight:bold;\">Star Playmakers</td><td style=\"padding:8px;text-align:right;\">2,837</td><td style=\"padding:8px;text-align:right;\">9.3</td><td style=\"padding:8px;text-align:right;\">3.2</td><td style=\"padding:8px;text-align:right;\">1.7</td><td style=\"padding:8px;text-align:right;\">0.177</td><td style=\"padding:8px;text-align:right;\">0.553</td><td style=\"padding:8px;text-align:right;\">+1.3</td></tr><tr><td style=\"padding:8px;text-align:center;font-weight:bold;\">2</td><td style=\"padding:8px;font-weight:bold;\">Paint Beasts</td><td style=\"padding:8px;text-align:right;\">1,167</td><td style=\"padding:8px;text-align:right;\">16.2</td><td style=\"padding:8px;text-align:right;\">8.7</td><td style=\"padding:8px;text-align:right;\">2.3</td><td style=\"padding:8px;text-align:right;\">0.231</td><td style=\"padding:8px;text-align:right;\">0.555</td><td style=\"padding:8px;text-align:right;\">+1.0</td></tr><tr><td style=\"padding:8px;text-align:center;font-weight:bold;\">3</td><td style=\"padding:8px;font-weight:bold;\">3-and-D Wings</td><td style=\"padding:8px;text-align:right;\">1,188</td><td style=\"padding:8px;text-align:right;\">18.5</td><td style=\"padding:8px;text-align:right;\">4.5</td><td style=\"padding:8px;text-align:right;\">5.9</td><td style=\"padding:8px;text-align:right;\">0.250</td><td style=\"padding:8px;text-align:right;\">0.549</td><td style=\"padding:8px;text-align:right;\">+2.3</td></tr><tr><td style=\"padding:8px;text-align:center;font-weight:bold;\">4</td><td style=\"padding:8px;font-weight:bold;\">Energy Bigs</td><td style=\"padding:8px;text-align:right;\">2,127</td><td style=\"padding:8px;text-align:right;\">6.1</td><td style=\"padding:8px;text-align:right;\">4.9</td><td style=\"padding:8px;text-align:right;\">0.8</td><td style=\"padding:8px;text-align:right;\">0.158</td><td style=\"padding:8px;text-align:right;\">0.552</td><td style=\"padding:8px;text-align:right;\">-0.5</td></tr><tr><td style=\"padding:8px;text-align:center;font-weight:bold;\">5</td><td style=\"padding:8px;font-weight:bold;\">Combo Guards</td><td style=\"padding:8px;text-align:right;\">1,590</td><td style=\"padding:8px;text-align:right;\">7.1</td><td style=\"padding:8px;text-align:right;\">2.0</td><td style=\"padding:8px;text-align:right;\">2.9</td><td style=\"padding:8px;text-align:right;\">0.189</td><td style=\"padding:8px;text-align:right;\">0.495</td><td style=\"padding:8px;text-align:right;\">-3.8</td></tr></table></div>"],"text/plain":["<IPython.core.display.HTML object>"]},"execution_count":12,"metadata":{},"output_type":"execute_result"}],"source":["# ‚îÄ‚îÄ Name archetypes based on actual statistical DNA ‚îÄ‚îÄ\n","# The naming logic uses cluster center values to assign the most fitting label.\n","\n","NAMES = {}\n","\n","for i in range(N_CLUSTERS):\n","    row = centers.iloc[i]\n","    pts  = row['pts']\n","    reb  = row['reb']\n","    ast  = row['ast']\n","    usg  = row.get('usg_pct', 0)\n","    ts   = row.get('ts_pct', 0)\n","    net  = row.get('net_rating', 0)\n","    oreb = row.get('oreb_pct', 0)\n","    dreb = row.get('dreb_pct', 0)\n","    \n","    # Score each candidate name\n","    scores = {}\n","    scores['Star Playmakers']   = (pts / 5) + (ast / 2) + (usg * 10) + max(0, net)\n","    scores['Paint Beasts']      = (reb / 2) + (oreb * 50) + (dreb * 30) + (pts / 8)\n","    scores['3-and-D Wings']     = (ts * 10) + max(0, net) * 2 + (pts / 4) - (ast / 3)\n","    scores['Energy Bigs']       = (reb / 2) + (dreb * 40) - (pts / 6) - (ast / 2)\n","    scores['Combo Guards']      = (ast / 1.5) + (pts / 8) - (reb / 3)\n","    scores['Deep Bench']        = 10 - pts - reb - ast + abs(min(0, net)) / 2\n","    \n","    NAMES[i] = scores\n","\n","# Assign greedily (highest score gets name, no repeats)\n","final_names = {}\n","used = set()\n","for _ in range(N_CLUSTERS):\n","    best_score = -999\n","    best_cluster = None\n","    best_name = None\n","    for c_id, name_scores in NAMES.items():\n","        if c_id in [c for c, n in final_names.items()]:\n","            continue\n","        for name, score in name_scores.items():\n","            if name not in used and score > best_score:\n","                best_score = score\n","                best_cluster = c_id\n","                best_name = name\n","    if best_cluster is not None:\n","        final_names[best_cluster] = best_name\n","        used.add(best_name)\n","\n","NAMES = final_names\n","df['archetype_name'] = df['archetype'].map(NAMES)\n","\n","# Display table\n","from IPython.display import HTML\n","rows = ''\n","for k in sorted(NAMES.keys()):\n","    v = NAMES[k]\n","    n = (df['archetype'] == k).sum()\n","    c = centers.iloc[k]\n","    rows += f'<tr><td style=\"padding:8px;text-align:center;font-weight:bold;\">{k}</td>'\n","    rows += f'<td style=\"padding:8px;font-weight:bold;\">{v}</td>'\n","    rows += f'<td style=\"padding:8px;text-align:right;\">{n:,}</td>'\n","    rows += f'<td style=\"padding:8px;text-align:right;\">{c[\"pts\"]:.1f}</td>'\n","    rows += f'<td style=\"padding:8px;text-align:right;\">{c[\"reb\"]:.1f}</td>'\n","    rows += f'<td style=\"padding:8px;text-align:right;\">{c[\"ast\"]:.1f}</td>'\n","    rows += f'<td style=\"padding:8px;text-align:right;\">{c.get(\"usg_pct\",0):.3f}</td>'\n","    rows += f'<td style=\"padding:8px;text-align:right;\">{c.get(\"ts_pct\",0):.3f}</td>'\n","    rows += f'<td style=\"padding:8px;text-align:right;\">{c.get(\"net_rating\",0):+.1f}</td></tr>'\n","\n","HTML(f'''<div style=\"background:#f8f9fa;padding:15px;border-radius:10px;\">\n","<table style=\"width:100%;font-size:13px;border-collapse:collapse;\">\n","<tr style=\"background:#1D428A;color:white;\">\n","<th style=\"padding:8px;\">ID</th><th style=\"padding:8px;\">Archetype</th><th style=\"padding:8px;\">Count</th>\n","<th style=\"padding:8px;\">PPG</th><th style=\"padding:8px;\">RPG</th><th style=\"padding:8px;\">APG</th>\n","<th style=\"padding:8px;\">USG%</th><th style=\"padding:8px;\">TS%</th><th style=\"padding:8px;\">Net Rtg</th>\n","</tr>{rows}</table></div>''')"]},{"cell_type":"code","execution_count":13,"id":"238c89b8","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:18.612979Z","iopub.status.busy":"2026-02-16T22:28:18.612609Z","iopub.status.idle":"2026-02-16T22:28:18.987233Z","shell.execute_reply":"2026-02-16T22:28:18.986219Z"},"papermill":{"duration":0.385972,"end_time":"2026-02-16T22:28:18.98916","exception":false,"start_time":"2026-02-16T22:28:18.603188","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe\n","    scrolling=\"no\"\n","    width=\"100%\"\n","    height=\"670\"\n","    src=\"iframe_figures/figure_13.html\"\n","    frameborder=\"0\"\n","    allowfullscreen\n","></iframe>\n"]},"metadata":{},"output_type":"display_data"}],"source":["# ‚îÄ‚îÄ THE PCA SCATTER (Interactive) ‚îÄ‚îÄ\n","fig = px.scatter(df, x='pca_x', y='pca_y', color='archetype_name',\n","    hover_data=[COLS['player'], 'season_year'] if COLS['player'] else ['season_year'],\n","    opacity=0.4, title='<b>üß¨ NBA Player Archetypes ‚Äî PCA Projection</b>',\n","    color_discrete_sequence=px.colors.qualitative.Bold)\n","\n","# Mark centroids\n","cpca = pca.transform(km.cluster_centers_)\n","for i,(cx,cy) in enumerate(cpca):\n","    fig.add_trace(go.Scatter(x=[cx],y=[cy],mode='markers+text',\n","        marker=dict(size=18,color='black',symbol='x',line=dict(width=2,color='white')),\n","        text=[NAMES[i]],textposition='top center',textfont=dict(size=9,color='black'),\n","        showlegend=False))\n","\n","fig.update_layout(font_family='Arial',title_font_size=18,height=650,\n","    plot_bgcolor='#fafafa',\n","    xaxis_title=f'PC1 ({pca.explained_variance_ratio_[0]:.0%} variance)',\n","    yaxis_title=f'PC2 ({pca.explained_variance_ratio_[1]:.0%} variance)',\n","    legend=dict(title='Archetype',font=dict(size=11)))\n","fig.update_traces(marker=dict(size=5), selector=dict(mode='markers'))\n","fig.show()"]},{"cell_type":"markdown","id":"4cb1c46c","metadata":{"papermill":{"duration":0.007561,"end_time":"2026-02-16T22:28:19.004438","exception":false,"start_time":"2026-02-16T22:28:18.996877","status":"completed"},"tags":[]},"source":["<a id=\"7\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üìà 7. Archetype Evolution Timeline</h2>\n","</div>\n","\n","This is the **centerpiece visualization** ‚Äî how has the mix of player types changed over 27 seasons?"]},{"cell_type":"code","execution_count":14,"id":"fd9859b1","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:19.021146Z","iopub.status.busy":"2026-02-16T22:28:19.020763Z","iopub.status.idle":"2026-02-16T22:28:19.173118Z","shell.execute_reply":"2026-02-16T22:28:19.172211Z"},"papermill":{"duration":0.16329,"end_time":"2026-02-16T22:28:19.175106","exception":false,"start_time":"2026-02-16T22:28:19.011816","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe\n","    scrolling=\"no\"\n","    width=\"100%\"\n","    height=\"570\"\n","    src=\"iframe_figures/figure_14.html\"\n","    frameborder=\"0\"\n","    allowfullscreen\n","></iframe>\n"]},"metadata":{},"output_type":"display_data"}],"source":["df['era_bin'] = (df['season_year']//5)*5\n","cross = pd.crosstab(df['era_bin'], df['archetype_name'], normalize='index')*100\n","\n","fig = px.area(cross.reset_index(), x='era_bin', y=cross.columns.tolist(),\n","    title='<b>NBA Archetype Evolution ‚Äî Share of Players Over Time</b>',\n","    color_discrete_sequence=px.colors.qualitative.Bold)\n","\n","fig.add_vline(x=1979, line_dash='dash', line_color='black', line_width=2,\n","              annotation_text='3-Point Line (1979)', annotation_position='top left',\n","              annotation_font_size=11, annotation_font_color='black')\n","\n","fig.update_layout(font_family='Arial',title_font_size=18,height=550,\n","    plot_bgcolor='#fafafa',xaxis_title='Year (5-Year Bins)',yaxis_title='Share (%)',\n","    yaxis_range=[0,100],legend=dict(title='Archetype',orientation='h',y=-0.2,x=0.5,xanchor='center'))\n","fig.show()"]},{"cell_type":"markdown","id":"a8069c8b","metadata":{"papermill":{"duration":0.007638,"end_time":"2026-02-16T22:28:19.190738","exception":false,"start_time":"2026-02-16T22:28:19.1831","status":"completed"},"tags":[]},"source":["<a id=\"8\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üîÄ 8. Positional Entropy Score</h2>\n","</div>\n","\n","<div style=\"background: linear-gradient(135deg, #1D428A, #0a4a8a); border-radius: 12px; padding: 20px; color: white; margin: 15px 0;\">\n","    <h4 style=\"color: #F58426; margin-bottom: 10px;\">üìê The Math</h4>\n","    <p style=\"font-size: 15px; line-height: 1.6;\"><b>Shannon Entropy</b> measures how evenly players are spread across archetypes. Higher entropy = more \"positionless\" basketball (all archetypes equally common). Lower entropy = more specialization (certain archetypes dominate).</p>\n","    <p style=\"font-size: 15px; font-family: monospace; text-align: center; margin-top: 10px; color: #FFD700;\">H = ‚àíŒ£ p·µ¢ log(p·µ¢)  |  Range: 0 (all same type) to 1.79 (perfectly uniform across 6)</p>\n","</div>"]},{"cell_type":"code","execution_count":15,"id":"d708cfd8","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:19.208119Z","iopub.status.busy":"2026-02-16T22:28:19.207713Z","iopub.status.idle":"2026-02-16T22:28:19.280542Z","shell.execute_reply":"2026-02-16T22:28:19.27953Z"},"papermill":{"duration":0.0842,"end_time":"2026-02-16T22:28:19.282504","exception":false,"start_time":"2026-02-16T22:28:19.198304","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe\n","    scrolling=\"no\"\n","    width=\"100%\"\n","    height=\"470\"\n","    src=\"iframe_figures/figure_15.html\"\n","    frameborder=\"0\"\n","    allowfullscreen\n","></iframe>\n"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["\n","Entropy trend: downward (more specialized) (slope = -0.0049/year)\n","  First 5 seasons avg: 1.751\n","  Last 5 seasons avg:  1.636\n","  Change: -6.6%\n","  Max possible (perfectly uniform across 6): 1.792\n","\n","üí° Interpretation: Despite the \"positionless basketball\" narrative, the data shows\n","   the NBA is actually becoming MORE specialized ‚Äî certain archetypes are growing\n","   while others shrink, concentrating players into dominant role types.\n"]}],"source":["# ‚îÄ‚îÄ Positional Entropy Over Time ‚îÄ‚îÄ\n","ent_data = []\n","for season, group in df.groupby('season_year'):\n","    if len(group) >= 30:\n","        counts = group['archetype'].value_counts(normalize=True)\n","        ent_data.append({'season': season, 'entropy': entropy(counts.values), 'n': len(group)})\n","\n","ent_df = pd.DataFrame(ent_data)\n","\n","if len(ent_df) > 0:\n","    fig = go.Figure()\n","    fig.add_trace(go.Scatter(x=ent_df['season'], y=ent_df['entropy'], mode='lines+markers',\n","        line=dict(color=NBA_BLUE, width=2.5), marker=dict(size=5), fill='tozeroy',\n","        fillcolor='rgba(29,66,138,0.1)', name='Entropy'))\n","    \n","    # Trend line\n","    z = np.polyfit(ent_df['season'], ent_df['entropy'], 1)\n","    fig.add_trace(go.Scatter(x=ent_df['season'], y=np.poly1d(z)(ent_df['season']),\n","        mode='lines', line=dict(color=NBA_RED, width=1.5, dash='dash'), name='Linear Trend'))\n","    \n","    trend_dir = 'upward (more positionless)' if z[0] > 0 else 'downward (more specialized)'\n","    fig.update_layout(title=f'<b>Positional Entropy ‚Äî Trend: {trend_dir}</b>',\n","        font_family='Arial', title_font_size=18, height=450, plot_bgcolor='#fafafa',\n","        xaxis_title='Season', yaxis_title='Shannon Entropy',\n","        legend=dict(orientation='h', y=-0.15))\n","    fig.show()\n","    \n","    early = ent_df.head(5)['entropy'].mean()\n","    late = ent_df.tail(5)['entropy'].mean()\n","    max_possible = np.log(N_CLUSTERS)\n","    \n","    print(f'\\nEntropy trend: {trend_dir} (slope = {z[0]:.4f}/year)')\n","    print(f'  First 5 seasons avg: {early:.3f}')\n","    print(f'  Last 5 seasons avg:  {late:.3f}')\n","    print(f'  Change: {(late/early-1)*100:+.1f}%')\n","    print(f'  Max possible (perfectly uniform across {N_CLUSTERS}): {max_possible:.3f}')\n","    \n","    if z[0] < 0:\n","        print(f'\\nüí° Interpretation: Despite the \"positionless basketball\" narrative, the data shows')\n","        print(f'   the NBA is actually becoming MORE specialized ‚Äî certain archetypes are growing')\n","        print(f'   while others shrink, concentrating players into dominant role types.')\n","else:\n","    print('‚ö†Ô∏è Not enough seasons for entropy calculation')"]},{"cell_type":"markdown","id":"b97fa700","metadata":{"papermill":{"duration":0.007864,"end_time":"2026-02-16T22:28:19.298409","exception":false,"start_time":"2026-02-16T22:28:19.290545","status":"completed"},"tags":[]},"source":["<a id=\"9\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üìà 9. The Efficiency Revolution</h2>\n","</div>\n","\n","<div style=\"background: linear-gradient(135deg, #1D428A, #0a4a8a); border-radius: 12px; padding: 20px; color: white; margin: 15px 0;\">\n","    <h4 style=\"color: #F58426; margin-bottom: 10px;\">üí° The Real Revolution</h4>\n","    <p style=\"font-size: 15px; line-height: 1.6;\">The biggest change in the modern NBA isn't about positions ‚Äî it's about <b>efficiency</b>. True Shooting % has climbed +5.3 percentage points since the late 1990s. Analytics have transformed shot selection across every archetype. Meanwhile, overall usage distribution has stayed remarkably stable.</p>\n","</div>"]},{"cell_type":"code","execution_count":16,"id":"f28089e9","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:19.316563Z","iopub.status.busy":"2026-02-16T22:28:19.315514Z","iopub.status.idle":"2026-02-16T22:28:19.4069Z","shell.execute_reply":"2026-02-16T22:28:19.405979Z"},"papermill":{"duration":0.102655,"end_time":"2026-02-16T22:28:19.408869","exception":false,"start_time":"2026-02-16T22:28:19.306214","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe\n","    scrolling=\"no\"\n","    width=\"100%\"\n","    height=\"500\"\n","    src=\"iframe_figures/figure_16.html\"\n","    frameborder=\"0\"\n","    allowfullscreen\n","></iframe>\n"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["\n","Avg Usage Rate:  Early (‚â§2002): 0.188  |  Recent (‚â•2018): 0.183\n","  ‚Üí Usage distribution has remained remarkably stable across eras\n"]}],"source":["# ‚îÄ‚îÄ Usage Rate evolution by archetype ‚îÄ‚îÄ\n","usg_col = COLS.get('usg')\n","\n","if usg_col and usg_col in df.columns:\n","    df['era_bin'] = (df['season_year'] // 3) * 3\n","    arch_usg = df.groupby(['era_bin', 'archetype_name'])[usg_col].mean().reset_index()\n","    \n","    fig = px.line(arch_usg, x='era_bin', y=usg_col, color='archetype_name',\n","        markers=True, title='<b>Usage Rate by Archetype Over Time</b>',\n","        color_discrete_sequence=px.colors.qualitative.Bold)\n","    fig.update_layout(font_family='Arial', title_font_size=18, height=480, plot_bgcolor='#fafafa',\n","        xaxis_title='Season (3-Year Bins)', yaxis_title='Avg Usage Rate',\n","        legend=dict(title='Archetype', font=dict(size=10)))\n","    fig.show()\n","    \n","    early = df[df['season_year'] <= 2002][usg_col].mean()\n","    late = df[df['season_year'] >= 2018][usg_col].mean()\n","    print(f'\\nAvg Usage Rate:  Early (‚â§2002): {early:.3f}  |  Recent (‚â•2018): {late:.3f}')\n","    if abs(late - early) < 0.01:\n","        print(f'  ‚Üí Usage distribution has remained remarkably stable across eras')\n","    else:\n","        print(f'  ‚Üí Change: {(late-early)*100:+.1f} percentage points')\n","else:\n","    print('‚ö†Ô∏è usg_pct not available')"]},{"cell_type":"code","execution_count":17,"id":"3267fab3","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:19.428515Z","iopub.status.busy":"2026-02-16T22:28:19.427589Z","iopub.status.idle":"2026-02-16T22:28:19.514794Z","shell.execute_reply":"2026-02-16T22:28:19.513888Z"},"papermill":{"duration":0.099176,"end_time":"2026-02-16T22:28:19.516645","exception":false,"start_time":"2026-02-16T22:28:19.417469","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe\n","    scrolling=\"no\"\n","    width=\"100%\"\n","    height=\"500\"\n","    src=\"iframe_figures/figure_17.html\"\n","    frameborder=\"0\"\n","    allowfullscreen\n","></iframe>\n"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["\n","Avg True Shooting:  Early (‚â§2002): 0.509  |  Recent (‚â•2018): 0.561\n","  ‚Üí Change: +5.3 percentage points ‚Äî the analytics revolution in action\n","  ‚Üí Every single archetype is shooting more efficiently than 20 years ago\n"]}],"source":["# ‚îÄ‚îÄ True Shooting % evolution by archetype ‚îÄ‚îÄ\n","ts_col = COLS.get('ts')\n","\n","if ts_col and ts_col in df.columns:\n","    arch_ts = df.groupby(['era_bin', 'archetype_name'])[ts_col].mean().reset_index()\n","    \n","    fig = px.line(arch_ts, x='era_bin', y=ts_col, color='archetype_name',\n","        markers=True, title='<b>True Shooting % by Archetype ‚Äî The Efficiency Revolution</b>',\n","        color_discrete_sequence=px.colors.qualitative.Bold)\n","    fig.update_layout(font_family='Arial', title_font_size=18, height=480, plot_bgcolor='#fafafa',\n","        xaxis_title='Season (3-Year Bins)', yaxis_title='True Shooting %',\n","        legend=dict(title='Archetype', font=dict(size=10)))\n","    fig.show()\n","    \n","    early = df[df['season_year'] <= 2002][ts_col].mean()\n","    late = df[df['season_year'] >= 2018][ts_col].mean()\n","    print(f'\\nAvg True Shooting:  Early (‚â§2002): {early:.3f}  |  Recent (‚â•2018): {late:.3f}')\n","    print(f'  ‚Üí Change: {(late-early)*100:+.1f} percentage points ‚Äî the analytics revolution in action')\n","    print(f'  ‚Üí Every single archetype is shooting more efficiently than 20 years ago')\n","else:\n","    print('‚ö†Ô∏è ts_pct not available')"]},{"cell_type":"markdown","id":"210af7ba","metadata":{"papermill":{"duration":0.008164,"end_time":"2026-02-16T22:28:19.532989","exception":false,"start_time":"2026-02-16T22:28:19.524825","status":"completed"},"tags":[]},"source":["<a id=\"10\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">ü¶Ñ 10. Unicorn Index</h2>\n","</div>\n","\n","<div style=\"background: linear-gradient(135deg, #1D428A, #0a4a8a); border-radius: 12px; padding: 20px; color: white; margin: 15px 0;\">\n","    <h4 style=\"color: #F58426; margin-bottom: 10px;\">üí° What's a Unicorn?</h4>\n","    <p style=\"font-size: 15px; line-height: 1.6;\">A player whose stat line doesn't fit <i>any</i> archetype. Measured as the <b>distance to the nearest cluster center</b> ‚Äî the farther away, the more unique.</p>\n","</div>"]},{"cell_type":"code","execution_count":18,"id":"6a2730f7","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:19.551334Z","iopub.status.busy":"2026-02-16T22:28:19.550545Z","iopub.status.idle":"2026-02-16T22:28:19.582313Z","shell.execute_reply":"2026-02-16T22:28:19.581399Z"},"papermill":{"duration":0.044066,"end_time":"2026-02-16T22:28:19.585028","exception":false,"start_time":"2026-02-16T22:28:19.540962","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["ü¶Ñ Top 20 Unicorn Players (Top 5% by distance to nearest centroid, min 5 PPG)\n","   Threshold: 3.04\n","\n","          player_name  season_year archetype_name  min_dist  pts  reb  ast  usg_pct  ts_pct\n","    Russell Westbrook         2016  3-and-D Wings  6.732969 31.6 10.7 10.4    0.408   0.554\n","        Dennis Rodman         1996   Paint Beasts  6.123577  5.7 16.1  3.1    0.100   0.479\n","         Nikola Jokic         2022  3-and-D Wings  6.084850 24.5 11.8  9.8    0.263   0.701\n","         Nikola Jokic         2021   Paint Beasts  6.030423 27.1 13.8  7.9    0.309   0.661\n","Giannis Antetokounmpo         2019   Paint Beasts  5.824010 29.5 13.6  5.6    0.363   0.613\n","    Russell Westbrook         2020  3-and-D Wings  5.554044 22.2 11.5 11.7    0.295   0.509\n","         James Harden         2016  3-and-D Wings  5.284399 29.1  8.1 11.2    0.341   0.613\n","Giannis Antetokounmpo         2022   Paint Beasts  5.229100 31.1 11.8  5.7    0.373   0.605\n","    Russell Westbrook         2018  3-and-D Wings  5.109967 22.9 11.1 10.7    0.301   0.501\n","          Ben Wallace         2002   Paint Beasts  5.016013  6.9 15.4  1.6    0.103   0.486\n","       DeAndre Jordan         2014   Paint Beasts  5.004128 11.5 15.0  0.7    0.135   0.638\n","          Joel Embiid         2022   Paint Beasts  4.938882 33.1 10.2  4.2    0.370   0.655\n","Giannis Antetokounmpo         2021   Paint Beasts  4.888063 29.9 11.6  5.8    0.340   0.633\n","    Russell Westbrook         2017  3-and-D Wings  4.874969 25.4 10.1 10.3    0.326   0.524\n","Giannis Antetokounmpo         2018   Paint Beasts  4.858108 27.7 12.5  5.9    0.314   0.644\n","          Rudy Gobert         2021   Paint Beasts  4.811874 15.6 14.7  1.1    0.166   0.732\n","         James Harden         2018  3-and-D Wings  4.789394 36.1  6.6  7.5    0.396   0.616\n","         Nikola Jokic         2020  3-and-D Wings  4.783903 26.4 10.8  8.3    0.293   0.647\n","          Luka Doncic         2021  3-and-D Wings  4.769209 28.4  9.1  8.7    0.368   0.571\n","       Tyson Chandler         2016    Energy Bigs  4.737810  8.4 11.5  0.6    0.113   0.703\n"]}],"source":["# ‚îÄ‚îÄ Unicorn Detection ‚îÄ‚îÄ\n","distances = km.transform(X)\n","df['min_dist'] = distances.min(axis=1)\n","\n","# Only consider meaningful players (enough pts + reb + ast to not be noise)\n","pts_col = COLS.get('pts', 'pts')\n","meaningful = df[df[pts_col] >= 5].copy()  # At least 5 PPG to qualify\n","\n","threshold = meaningful['min_dist'].quantile(0.95)\n","\n","player_col = COLS.get('player', 'player_name')\n","show_cols = [c for c in [player_col, 'season_year', 'archetype_name', 'min_dist'] if c]\n","stat_cols = [COLS[k] for k in ['pts', 'reb', 'ast', 'usg', 'ts'] if COLS.get(k)]\n","show_cols += stat_cols\n","\n","unicorns = meaningful[meaningful['min_dist'] >= threshold].sort_values('min_dist', ascending=False)\n","\n","print(f'ü¶Ñ Top 20 Unicorn Players (Top 5% by distance to nearest centroid, min 5 PPG)')\n","print(f'   Threshold: {threshold:.2f}\\n')\n","print(unicorns[show_cols].head(20).to_string(index=False))"]},{"cell_type":"code","execution_count":19,"id":"c8fd5732","metadata":{"execution":{"iopub.execute_input":"2026-02-16T22:28:19.608456Z","iopub.status.busy":"2026-02-16T22:28:19.607728Z","iopub.status.idle":"2026-02-16T22:28:19.658008Z","shell.execute_reply":"2026-02-16T22:28:19.65702Z"},"papermill":{"duration":0.062202,"end_time":"2026-02-16T22:28:19.659941","exception":false,"start_time":"2026-02-16T22:28:19.597739","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<iframe\n","    scrolling=\"no\"\n","    width=\"100%\"\n","    height=\"420\"\n","    src=\"iframe_figures/figure_19.html\"\n","    frameborder=\"0\"\n","    allowfullscreen\n","></iframe>\n"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["\n","Unicorn rate (early): 4.7%  |  Recent: 8.1%\n"]}],"source":["# ‚îÄ‚îÄ Unicorn frequency over time ‚îÄ‚îÄ\n","df['is_unicorn'] = (df['min_dist']>=threshold).astype(int)\n","u_trend = df.groupby('era_bin')['is_unicorn'].mean()*100\n","\n","fig = go.Figure(go.Bar(x=u_trend.index,y=u_trend.values,\n","    marker_color=NBA_RED,marker_line_width=0,opacity=0.8,\n","    text=[f'{v:.1f}%' for v in u_trend.values],textposition='outside'))\n","fig.update_layout(title='<b>Unicorn Frequency Over Time (% of Players)</b>',\n","    font_family='Arial',title_font_size=18,height=400,plot_bgcolor='#fafafa',\n","    xaxis_title='Era (5-Year Bin)',yaxis_title='% Unicorn Players')\n","fig.show()\n","\n","early = u_trend.iloc[:3].mean() if len(u_trend)>3 else 0\n","late = u_trend.iloc[-3:].mean() if len(u_trend)>3 else 0\n","print(f'\\nUnicorn rate (early): {early:.1f}%  |  Recent: {late:.1f}%')"]},{"cell_type":"markdown","id":"b94898a5","metadata":{"papermill":{"duration":0.008543,"end_time":"2026-02-16T22:28:19.677115","exception":false,"start_time":"2026-02-16T22:28:19.668572","status":"completed"},"tags":[]},"source":["<a id=\"11\"></a>\n","<div style=\"background: linear-gradient(to right, #1D428A, #1a1a2e); padding: 15px 20px; border-radius: 8px; margin-top: 20px;\">\n","    <h2 style=\"color: #FFFFFF; margin: 0;\">üèÜ 11. Conclusions</h2>\n","</div>\n","\n","---\n","\n","<div style=\"background: linear-gradient(135deg, #1D428A 0%, #C8102E 50%, #1D428A 100%); padding: 30px; border-radius: 15px; margin: 20px 0;\">\n","    <h2 style=\"color: #FFD700; text-align: center; margin-bottom: 20px;\">The Real Evolution of NBA Basketball</h2>\n","    <div style=\"display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;\">\n","        <div style=\"background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center; min-width: 150px;\">\n","            <div style=\"font-size: 30px;\">üß¨</div>\n","            <div style=\"color: #F58426; font-weight: 700;\">6 Archetypes</div>\n","            <div style=\"color: #CCC; font-size: 12px;\">Emerge naturally<br>from 9 stats alone</div>\n","        </div>\n","        <div style=\"background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center; min-width: 150px;\">\n","            <div style=\"font-size: 30px;\">üìâ</div>\n","            <div style=\"color: #F58426; font-weight: 700;\">More Specialized</div>\n","            <div style=\"color: #CCC; font-size: 12px;\">Entropy down 6.6%<br>Roles are concentrating</div>\n","        </div>\n","        <div style=\"background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center; min-width: 150px;\">\n","            <div style=\"font-size: 30px;\">üìà</div>\n","            <div style=\"color: #F58426; font-weight: 700;\">TS% +5.3pp</div>\n","            <div style=\"color: #CCC; font-size: 12px;\">Every archetype<br>is more efficient</div>\n","        </div>\n","        <div style=\"background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center; min-width: 150px;\">\n","            <div style=\"font-size: 30px;\">ü¶Ñ</div>\n","            <div style=\"color: #F58426; font-weight: 700;\">2√ó Unicorns</div>\n","            <div style=\"color: #CCC; font-size: 12px;\">Outlier rate doubled<br>4.7% ‚Üí 8.1%</div>\n","        </div>\n","    </div>\n","</div>\n","\n","### Key Findings\n","\n","**1. Six natural archetypes emerge from 9 advanced stats.** Without position labels, K-Means discovers player types that basketball fans would recognize instantly ‚Äî from Star Playmakers to Deep Bench. The traditional 5-position system is too coarse, but 6 types capture the real structure.\n","\n","**2. The \"positionless\" narrative doesn't survive contact with data.** Entropy is *down* 6.6% since 1996, meaning the league is getting MORE specialized, not less. Certain archetypes are growing while others shrink. The NBA isn't erasing roles ‚Äî it's redefining them.\n","\n","**3. The efficiency revolution is the real story.** True Shooting is up +5.3 percentage points across every archetype. Analytics-driven shot selection has transformed scoring efficiency league-wide ‚Äî from stars to deep bench players.\n","\n","**4. Usage distribution has been remarkably stable.** Despite narrative about \"hero ball,\" the distribution of offensive burden across player types has barely changed in 27 years.\n","\n","**5. Unicorn players have nearly doubled.** The rate of archetype-defying outliers has grown from 4.7% to 8.1%. Westbrook's triple-doubles, Jokic's passing center game, Giannis's point-forward dominance ‚Äî these are statistically confirmed anomalies that don't fit any cluster.\n","\n","---\n","\n","### The Synthesis\n","\n","The modern NBA isn't becoming positionless ‚Äî it's becoming **more specialized AND more efficient simultaneously**, while producing a growing number of players who break the mold entirely. The \"positionless\" discourse conflates two real but separate trends: the efficiency revolution (everyone shoots better) and the unicorn explosion (a few players defy all categories).\n","\n","---\n","\n","### Future Directions\n","- Incorporate tracking data (speed, distance) for physical archetypes\n","- Team-level: which archetype combinations win championships?\n","- Draft model: predict which archetype a college player becomes\n","- Salary analysis: which archetypes are over/underpaid?\n","- Compare to 1970s‚Äì1990s with a broader dataset\n","\n","---\n","\n","<div style=\"text-align: center; padding: 20px; color: #888;\">\n","    <p><b>Thanks for reading!</b> If you found this interesting, please upvote. üëç</p>\n","    <p style=\"font-size: 12px;\">Built with Python ‚Ä¢ pandas ‚Ä¢ Plotly ‚Ä¢ scikit-learn | 10,720 player-seasons analyzed</p>\n","</div>"]}],"metadata":{"kaggle":{"accelerator":"none","dataSources":[{"datasetId":1358,"sourceId":30676,"sourceType":"datasetVersion"},{"datasetId":98271,"sourceId":6687390,"sourceType":"datasetVersion"},{"datasetId":1177523,"sourceId":14700990,"sourceType":"datasetVersion"}],"dockerImageVersionId":31259,"isGpuEnabled":false,"isInternetEnabled":false,"language":"python","sourceType":"notebook"},"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.12.12"},"papermill":{"default_parameters":{},"duration":32.749219,"end_time":"2026-02-16T22:28:20.606489","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2026-02-16T22:27:47.85727","version":"2.6.0"}},"nbformat":4,"nbformat_minor":5}
